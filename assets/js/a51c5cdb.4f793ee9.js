"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[603],{7149:(e,d,r)=>{r.r(d),r.d(d,{assets:()=>l,contentTitle:()=>t,default:()=>x,frontMatter:()=>c,metadata:()=>i,toc:()=>o});var s=r(74848),n=r(28453);const c={},t="Configuration",i={id:"container/components/k8s-cluster-api-provider/doc/configuration",title:"Configuration",description:"Supported k8s versions",source:"@site/docs/03-container/components/k8s-cluster-api-provider/doc/configuration.md",sourceDirName:"03-container/components/k8s-cluster-api-provider/doc",slug:"/container/components/k8s-cluster-api-provider/doc/configuration",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/SovereignCloudStack/docs/tree/main/docs/03-container/components/k8s-cluster-api-provider/doc/configuration.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Application Credentials",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/application-credentials"},next:{title:"Maintenance and Troubleshooting Guide for SCS k8s-cluster-api-provider",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/Maintenance_and_Troubleshooting"}},l={},o=[{value:"Supported k8s versions",id:"supported-k8s-versions",level:2},{value:"Overview over the parameters in clusterctl.yaml and environment-XXX.tfvars",id:"overview-over-the-parameters-in-clusterctlyaml-and-environment-xxxtfvars",level:2},{value:"Parameters CAPI management server",id:"parameters-capi-management-server",level:3},{value:"Common parameters management server and clusters",id:"common-parameters-management-server-and-clusters",level:3},{value:"Parameters clusters",id:"parameters-clusters",level:3}];function h(e){const d={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.h1,{id:"configuration",children:"Configuration"}),"\n",(0,s.jsx)(d.h2,{id:"supported-k8s-versions",children:"Supported k8s versions"}),"\n",(0,s.jsx)(d.p,{children:"As of R6, our tests cover 1.25.latest ... 1.28.latest.\nAll of them pass the sonobuoy CNCF conformance tests."}),"\n",(0,s.jsx)(d.h2,{id:"overview-over-the-parameters-in-clusterctlyaml-and-environment-xxxtfvars",children:"Overview over the parameters in clusterctl.yaml and environment-XXX.tfvars"}),"\n",(0,s.jsx)(d.p,{children:"The provenance capo means that this setting comes from the templates used by\nthe cluster-api-provider-openstack, while SCS denotes that this setting has\nbeen added by the SCS project."}),"\n",(0,s.jsx)(d.h3,{id:"parameters-capi-management-server",children:"Parameters CAPI management server"}),"\n",(0,s.jsx)(d.p,{children:"Parameters controlling the Cluster-API management server (capi management server) creation:"}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"environment"}),(0,s.jsx)(d.th,{children:"clusterctl.yaml"}),(0,s.jsx)(d.th,{children:"provenance"}),(0,s.jsx)(d.th,{children:"default"}),(0,s.jsx)(d.th,{children:"meaning"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"prefix"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"capi"})}),(0,s.jsx)(d.td,{children:"Prefix used for OpenStack resources for the capi mgmt node"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"kind_flavor"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"SCS-2V-4"})}),(0,s.jsx)(d.td,{children:"Flavor to be used for the k8s capi mgmt server"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"image"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"Ubuntu 22.04"})}),(0,s.jsxs)(d.td,{children:["Image for the capi mgmt server. Use ",(0,s.jsx)(d.code,{children:"Ubuntu 22.04"})," or ",(0,s.jsx)(d.code,{children:"Debian 12"}),". Check also the ",(0,s.jsx)(d.code,{children:"ssh_username"})," parameter"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"ssh_username"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"ubuntu"})}),(0,s.jsxs)(d.td,{children:["Name of the default user for the ",(0,s.jsx)(d.code,{children:"image"})]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"clusterapi_version"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.code,{children:"1.6.3"})," "]}),(0,s.jsxs)(d.td,{children:["Version of the cluster-API incl. ",(0,s.jsx)(d.code,{children:"clusterctl"})]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"capi_openstack_version"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.code,{children:"0.9.0"})," "]}),(0,s.jsx)(d.td,{children:"Version of the cluster-api-provider-openstack (needs to fit the CAPI version)"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"cilium_binaries"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"v0.15.23;v0.13.0"})}),(0,s.jsx)(d.td,{children:"Versions of the cilium and hubble CLI in the vA.B.C;vX.Y.Z format"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"restrict_mgmt_server"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'["0.0.0.0/0"]'})}),(0,s.jsx)(d.td,{children:"Allows restricting access to the management server by the given list of CIDRs. Empty value (default) means public."})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"mgmt_cidr"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"10.0.0.0/24"})}),(0,s.jsx)(d.td,{children:"IPv4 address range (CIDR notation) for management cluster"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"mgmt_ip_range"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'{start:"10.0.0.11", end:"10.0.0.254"}'})}),(0,s.jsxs)(d.td,{children:["IP range from defined ",(0,s.jsx)(d.code,{children:"mgmt_cidr"})," variable for management cluster. It is recommended to reserve the first 10 IPs."]})]})]})]}),"\n",(0,s.jsx)(d.h3,{id:"common-parameters-management-server-and-clusters",children:"Common parameters management server and clusters"}),"\n",(0,s.jsx)(d.p,{children:"Parameters controlling both management server creation and cluster creation:"}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"environment"}),(0,s.jsx)(d.th,{children:"clusterctl.yaml"}),(0,s.jsx)(d.th,{children:"provenance"}),(0,s.jsx)(d.th,{children:"default"}),(0,s.jsx)(d.th,{children:"meaning"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"cloud_provider"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_CLOUD"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.code,{children:"OS_CLOUD"})," name in clouds.yaml"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.code,{children:"external"}),"/",(0,s.jsx)(d.code,{children:"external_id"})]}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_EXTERNAL_NETWORK_ID"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'""'})}),(0,s.jsx)(d.td,{children:'Name/ID of the external (public) OpenStack network, default "" uses the detected external network (for clouds with one external network). Required for clouds with more than one external network'})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"dns_nameservers"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_DNS_NAMESERVERS"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'[ "5.1.66.255", "185.150.99.255" ]'})}),(0,s.jsx)(d.td,{children:"Array of nameservers for capi mgmt server and for cluster nodes, replace the FF MUC defaults with local servers if available"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"availability_zone"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_FAILURE_DOMAIN"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"Availability Zone(s) for the mgmt node / workload clusters"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"kind_mtu"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"MTU_VALUE"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"0"})}),(0,s.jsx)(d.td,{children:"MTU for the mgmt server; Calico is set 50 bytes smaller; 0 means autodetection"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"http_proxy"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{}),(0,s.jsxs)(d.td,{children:["Global setting for HTTP Proxy is set on the management host including all cluster-api components running in the bootstrap-cluster.  Specify with protocol: e.g ",(0,s.jsx)(d.code,{children:"http://10.10.10.10:3128"})]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"no_proxy"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{}),(0,s.jsxs)(d.td,{children:["Global setting for HTTP Proxy exception list. If ",(0,s.jsx)(d.code,{children:"http_proxy"})," is not set this setting has no effect. If ",(0,s.jsx)(d.code,{children:"http_proxy"})," is set, the default value for the ",(0,s.jsx)(d.code,{children:"NO_PROXY"})," environment variable on all affected components is set to ",(0,s.jsx)(d.code,{children:".svc,.svc.cluster,.svc.cluster.local,127.0.0.0/8,169.254.169.254/32,fd00:ec2::254/128,${var.node_cidr},${var.pod_cidr},${var.service_cidr}"}),". The content of ",(0,s.jsx)(d.code,{children:"no_proxy"})," is appended to this list. This setting has no effect on apt and snap commands, the way ",(0,s.jsx)(d.code,{children:"http_proxy"})," is set for apt and snap does not allow the configuration of proxy exceptions."]})]})]})]}),"\n",(0,s.jsx)(d.h3,{id:"parameters-clusters",children:"Parameters clusters"}),"\n",(0,s.jsx)(d.p,{children:"Parameters controlling the cluster creation:"}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"environment"}),(0,s.jsx)(d.th,{children:"clusterctl.yaml"}),(0,s.jsx)(d.th,{children:"provenance"}),(0,s.jsx)(d.th,{children:"default"}),(0,s.jsx)(d.th,{children:"meaning"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"node_cidr"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"NODE_CIDR"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"10.8.0.0/20"})}),(0,s.jsx)(d.td,{children:"IPv4 address range (CIDR notation) for workload nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"pod_cidr"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"POD_CIDR"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"192.168.0.0/16"})}),(0,s.jsx)(d.td,{children:"IPv4 address range (CIDR notation) for pods"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"service_cidr"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"SERVICE_CIDR"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"10.96.0.0/12"})}),(0,s.jsx)(d.td,{children:"IPv4 address range (CIDR notation) for services"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"use_cilium"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"USE_CILIUM"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsxs)(d.td,{children:["Use cilium as CNI instead of calico, it can be set to vX.Y.Z and ",(0,s.jsx)(d.code,{children:"true"})," results in ",(0,s.jsx)(d.code,{children:"v1.15.1"}),", also see ",(0,s.jsx)(d.code,{children:"cilium_binaries"})]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"calico_version"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"CALICO_VERSION"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.code,{children:"v3.27.3"})," "]}),(0,s.jsxs)(d.td,{children:["Version of the Calico CNI provider (ignored if ",(0,s.jsx)(d.code,{children:"use_cilium"})," is set)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"kubernetes_version"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"KUBERNETES_VERSION"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"v1.28.x"})}),(0,s.jsxs)(d.td,{children:["Kubernetes version deployed into workload cluster (",(0,s.jsx)(d.code,{children:".x"})," means latest patch release)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_IMAGE_NAME"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"ubuntu-capi-image-${KUBERNETES_VERION}"})}),(0,s.jsx)(d.td,{children:"Image name for k8s controller and worker nodes. Ubuntu 22.04 image is used for k8s versions >= 1.27.3, 1.26.6, 1.25.11, Ubuntu 20.04 otherwise."})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"kube_image_raw"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_IMAGE_RAW"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:"Register images in raw format (instead of qcow2), good for ceph COW"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"image_registration_extra_flags"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_IMAGE_REGISTATION_EXTRA_FLAGS"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'""'})}),(0,s.jsx)(d.td,{children:"Extra flags passed during image registration"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_SSH_KEY_NAME"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"${prefix}-keypair"})}),(0,s.jsx)(d.td,{children:"SSH key name generated and used to connect to workload cluster nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"controller_flavor"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_CONTROL_PLANE_MACHINE_FLAVOR"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"SCS-2V-4-20s"})}),(0,s.jsx)(d.td,{children:"Flavor to be used for control plane nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"worker_flavor"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_NODE_MACHINE_FLAVOR"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"SCS-2V-4-20s"})}),(0,s.jsx)(d.td,{children:"Flavor to be used for worker nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"controller_count"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"CONTROL_PLANE_MACHINE_COUNT"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"1"})}),(0,s.jsx)(d.td,{children:"Number of control plane nodes in testcluster (0 skips testcluster creation)"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"CONTROL_PLANE_MACHINE_GEN"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"genc01"})}),(0,s.jsx)(d.td,{children:"Suffix for control plane node resources, to be changed for rolling upgrades"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"worker_count"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"WORKER_MACHINE_COUNT"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"3"})}),(0,s.jsx)(d.td,{children:"Number of worker nodes in testcluster"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"WORKER_MACHINE_GEN"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"genw01"})}),(0,s.jsx)(d.td,{children:"Suffix for worker node resources, to be changed for rolling upgrades"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"CONTROL_PLANE_ROOT_DISKSIZE"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"20"})}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.em,{children:"If"})," diskless flavors are used for control plane nodes, this is the allocated root volume disk size (in GB)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"WORKER_ROOT_DISKSIZE"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"20"})}),(0,s.jsxs)(d.td,{children:[(0,s.jsx)(d.em,{children:"If"})," diskless flavors are used for worker nodes, this is the allocated root volume disk size (in GB)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"anti_affinity"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_ANTI_AFFINITY"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:"Use anti-affinity server groups to prevent k8s nodes on same host (soft for workers, hard for controllers)"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"soft_anti_affinity_controller"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_SOFT_ANTI_AFFINITY_CONTROLLER"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsxs)(d.td,{children:["Allow the use of soft-anti-affinity for the controllers (if ",(0,s.jsx)(d.code,{children:"anti_affinity"})," is ",(0,s.jsx)(d.code,{children:"true"}),")"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_SRVGRP_CONTROLLER"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nonono"})}),(0,s.jsxs)(d.td,{children:["Autogenerated if ",(0,s.jsx)(d.code,{children:"anti_affinity"})," is ",(0,s.jsx)(d.code,{children:"true"}),", eliminated otherwise"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_SRVGRP_WORKER"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"nonono"})}),(0,s.jsxs)(d.td,{children:["Autogenerated if ",(0,s.jsx)(d.code,{children:"anti_affinity"})," is ",(0,s.jsx)(d.code,{children:"true"}),", eliminated otherwise"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_occm"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_OCCM"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsxs)(d.td,{children:["Deploy the given version of OCCM into the cluster. ",(0,s.jsx)(d.code,{children:"true"})," (default) chooses the latest version matching the k8s version. You can specify ",(0,s.jsx)(d.code,{children:"master"})," to chose the upstream master branch. Don't disable this."]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_cindercsi"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_CINDERCSI"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:"Deploy the given (or latest matching for the default true value) of cinder CSI."})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"etcd_unsafe_fs"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"ETCD_UNSAFE_FS"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsxs)(d.td,{children:["Use ",(0,s.jsx)(d.code,{children:"barrier=0"})," for filesystem on control nodes to avoid storage latency. Use for multi-controller clusters on slow/networked storage, otherwise not recommended."]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"testcluster_name"})}),(0,s.jsx)(d.td,{children:"(cmd line)"}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"testcluster"})}),(0,s.jsxs)(d.td,{children:["Allows setting the default cluster name, created at bootstrap (if ",(0,s.jsx)(d.code,{children:"controller_count"})," is larger than 0)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"restrict_kubeapi"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"RESTRICT_KUBEAPI"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"[ ]"})}),(0,s.jsxs)(d.td,{children:["Allows restricting access to kubernetes API by list of CIDRs. Empty list (default) means public, ",(0,s.jsx)(d.code,{children:'[ "none" ]'})," means internal access only."]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"controller_metadata"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_CONTROL_PLANE_MACHINE_METADATA"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"{ }"})}),(0,s.jsx)(d.td,{children:"Adds additional metadata for instances running the k8s management nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"worker_metadata"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_NODE_MACHINE_METADATA"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"{ }"})}),(0,s.jsx)(d.td,{children:"Adds additional metadata for instances running the k8s worker nodes"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"OPENSTACK_CLUSTER_GEN"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"geno01"})}),(0,s.jsx)(d.td,{children:"Generation counter for the OpenStackClusterTemplate resource. Increase, when changing restrict_kubeapi or other OC settings"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"capo_instance_create_timeout"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"CLUSTER_API_OPENSTACK_INSTANCE_CREATE_TIMEOUT"})}),(0,s.jsx)(d.td,{children:"capo"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"5"})}),(0,s.jsx)(d.td,{children:"Time to wait for an OpenStack machine to be created (in minutes)"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"containerd_registry_files"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'{"hosts":["./files/containerd/docker.io"], "certs":[]}'})}),(0,s.jsxs)(d.td,{children:["Containerd registry hosts config files, see related ",(0,s.jsx)(d.a,{href:"/docs/container/components/k8s-cluster-api-provider/doc/usage/containter-registry-configuration",children:"docs"})," for details."]})]})]})]}),"\n",(0,s.jsx)(d.p,{children:"Optional services deployed to cluster:"}),"\n",(0,s.jsxs)(d.table,{children:[(0,s.jsx)(d.thead,{children:(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.th,{children:"environment"}),(0,s.jsx)(d.th,{children:"clusterctl.yaml"}),(0,s.jsx)(d.th,{children:"provenance"}),(0,s.jsx)(d.th,{children:"default"}),(0,s.jsx)(d.th,{children:"script"}),(0,s.jsx)(d.th,{children:"meaning"})]})}),(0,s.jsxs)(d.tbody,{children:[(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_metrics"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_METRICS"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"apply_metrics.sh"})}),(0,s.jsxs)(d.td,{children:["Deploy metrics service to nodes to make ",(0,s.jsx)(d.code,{children:"kubectl top"})," work"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_nginx_ingress"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_NGINX_INGRESS"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"apply_nginx_ingress.sh"})}),(0,s.jsxs)(d.td,{children:["Deploy NGINX ingress controller (this spawns an OpenStack Loadbalancer), pass version to explicitly choose the version, ",(0,s.jsx)(d.code,{children:"true"})," results in ",(0,s.jsx)(d.code,{children:"v1.9.6"})," (supported k8s >= 1.25)"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:"``"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"NGINX_INGRESS_PROXY"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"true"})}),(0,s.jsx)(d.td,{children:"(dito)"}),(0,s.jsx)(d.td,{children:"Configure LB and nginx to get real IP via PROXY protocol; trouble for pod to LB connections has been resolved by setting hostname"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"use_ovn_lb_provider"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"USE_OVN_LB_PROVIDER"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"apply_nginx_ingress.sh"})}),(0,s.jsxs)(d.td,{children:["Clouds using OVN networking can deploy the OVN provider that has low overhead (L3) and makes real client IPs visible without proxy protocol hacks. Set to ",(0,s.jsx)(d.code,{children:"auto"})," to enable."]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_gateway_api"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_GATEWAY_API"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"create_cluster.sh"})}),(0,s.jsx)(d.td,{children:'Deploy Gateway APIs CRDs and enable ciliums Gateway API implementation. This only works in conjunction with USE_CILIUM=true. Also this will break at least one CNCF conformance test. This feature is considered a tech-review. Keep in mind that Gateway API itself is under development and not GA. Also note that ciliums implementation of Gateway API is considered "beta".'})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_cert_manager"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_CERT_MANAGER"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"apply_cert_manager.sh"})}),(0,s.jsxs)(d.td,{children:["Deploy cert-manager, pass version (e.g. ",(0,s.jsx)(d.code,{children:"v1.14.2"}),") to explicitly choose a version"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_flux"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"DEPLOY_FLUX"})}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"create_cluster.sh"})}),(0,s.jsx)(d.td,{children:"Deploy flux2 into the cluster"})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_harbor"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"false"})}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"deploy_harbor.sh"})}),(0,s.jsxs)(d.td,{children:["Deploy harbor into the cluster. When enabled, it will overwrite the settings above. Harbor forces deployment of ",(0,s.jsx)(d.code,{children:"flux"})," and based on config, it can force deployment of other dependencies (",(0,s.jsx)(d.code,{children:"cert-manager"}),", ",(0,s.jsx)(d.code,{children:"ingress-nginx"})," and ",(0,s.jsx)(d.code,{children:"Cinder CSI"}),")"]})]}),(0,s.jsxs)(d.tr,{children:[(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:"harbor_config"})}),(0,s.jsx)(d.td,{}),(0,s.jsx)(d.td,{children:"SCS"}),(0,s.jsx)(d.td,{children:(0,s.jsx)(d.code,{children:'{domain_name:"", issuer_email:"", persistence:false, database_size:"1Gi", redis_size:"1Gi", trivy_size:"5Gi"}'})}),(0,s.jsx)(d.td,{children:"(dito)"}),(0,s.jsxs)(d.td,{children:["Harbor container registry configuration options, see related ",(0,s.jsx)(d.a,{href:"/docs/container/components/k8s-cluster-api-provider/doc/usage/harbor",children:"docs"})," for details."]})]})]})]})]})}function x(e={}){const{wrapper:d}={...(0,n.R)(),...e.components};return d?(0,s.jsx)(d,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,d,r)=>{r.d(d,{R:()=>t,x:()=>i});var s=r(96540);const n={},c=s.createContext(n);function t(e){const d=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(d):{...d,...e}}),[d,e])}function i(e){let d;return d=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),s.createElement(c.Provider,{value:d},e.children)}}}]);