"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1822],{95439:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var s=n(74848),r=n(28453);const c={},o="Create a new cluster",a={id:"container/components/k8s-cluster-api-provider/doc/usage/create-new-cluster",title:"Create a new cluster",description:"On the management server (login with make ssh), create a directory (below the home of",source:"@site/docs/03-container/components/k8s-cluster-api-provider/doc/usage/create-new-cluster.md",sourceDirName:"03-container/components/k8s-cluster-api-provider/doc/usage",slug:"/container/components/k8s-cluster-api-provider/doc/usage/create-new-cluster",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/usage/create-new-cluster",draft:!1,unlisted:!1,editUrl:"https://github.com/SovereignCloudStack/docs/tree/main/docs/03-container/components/k8s-cluster-api-provider/doc/usage/create-new-cluster.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Usage",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/usage/"},next:{title:"Managing many clusters",permalink:"/docs/container/components/k8s-cluster-api-provider/doc/usage/managing-many-clusters"}},i={},l=[];function d(e){const t={code:"code",h1:"h1",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"create-a-new-cluster",children:"Create a new cluster"}),"\n",(0,s.jsxs)(t.p,{children:["On the management server (login with ",(0,s.jsx)(t.code,{children:"make ssh"}),"), create a directory (below the home of\nthe standard ubuntu user) with the name of your cluster. Copy over ",(0,s.jsx)(t.code,{children:"clusterctl.yaml"})," from\n",(0,s.jsx)(t.code,{children:"~/cluster-defaults/"})," and edit it according to your needs. You can also copy over other\nfiles from ",(0,s.jsx)(t.code,{children:"~/cluster-defaults/"})," and adjust them, but this is only needed in exceptional\ncases.\nNow run ",(0,s.jsx)(t.code,{children:"create_cluster.sh <CLUSTER_NAME>"})]}),"\n",(0,s.jsxs)(t.p,{children:["This will copy all missing defaults from ",(0,s.jsx)(t.code,{children:"~/cluster-defaults/"})," into the directory with your\ncluster name and then ask cluster-api to create the cluster. The scripts also take\ncare of security groups, anti-affinity, node image registration (if needed) and\nof deploying CCM, CNI, CSI as well as optional services such as metrics or nginx-ingress\ncontroller."]}),"\n",(0,s.jsxs)(t.p,{children:["You can access the new cluster with ",(0,s.jsx)(t.code,{children:"kubectl --context clustername-admin@cluster"}),"\nor ",(0,s.jsx)(t.code,{children:"KUBECONFIG=~/clustername/clustername.yaml kubectl"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The management cluster is in context ",(0,s.jsx)(t.code,{children:"kind-kind"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["Note that you can always change ",(0,s.jsx)(t.code,{children:"clusterctl.yaml"})," and re-run ",(0,s.jsx)(t.code,{children:"create_cluster.sh"}),". The script is idempotent and running\nit multiple times with the unchanged input file will result in no changes to the cluster."]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var s=n(96540);const r={},c=s.createContext(r);function o(e){const t=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(c.Provider,{value:t},e.children)}}}]);